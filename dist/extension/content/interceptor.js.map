{
  "version": 3,
  "sources": ["../../../extension/detectors/features.ts", "../../../extension/detectors/rules.ts", "../../../extension/detectors/classifier.ts", "../../../extension/ui/modal.ts", "../../../extension/content/interceptor.ts"],
  "sourcesContent": ["export interface Features {\r\n  length: number;\r\n  lineCount: number;\r\n  containsBackticks: boolean;\r\n  containsKeyValuePairs: boolean;\r\n  containsCredentialKeywords: boolean;\r\n  keywordDensity: number; // 0..1\r\n  symbolRatio: number; // 0..1\r\n  digitRatio: number; // 0..1\r\n  base64Like: boolean;\r\n  entropyApprox: number; // 0..1\r\n}\r\n\r\nconst CREDENTIAL_KEYWORDS = [\r\n  \"password\",\r\n  \"passwd\",\r\n  \"pwd\",\r\n  \"secret\",\r\n  \"token\",\r\n  \"api key\",\r\n  \"apikey\",\r\n  \"private key\",\r\n  \"ssh\",\r\n  \"bearer\",\r\n  \"authorization\",\r\n  \"oauth\",\r\n];\r\n\r\nexport function normalizeForScan(text: string, maxChars = 10000): string {\r\n  const t = text ?? \"\";\r\n  // limit length for perf; scanning beyond this gives diminishing returns\r\n  const clipped = t.length > maxChars ? t.slice(0, maxChars) : t;\r\n  // normalize newlines and whitespace (but preserve enough structure)\r\n  return clipped.replace(/\\r\\n/g, \"\\n\");\r\n}\r\n\r\nfunction countLines(text: string): number {\r\n  if (!text) return 0;\r\n  return text.split(\"\\n\").length;\r\n}\r\n\r\nfunction ratioOf(test: (c: string) => boolean, text: string): number {\r\n  if (!text) return 0;\r\n  let count = 0;\r\n  for (const ch of text) if (test(ch)) count++;\r\n  return count / text.length;\r\n}\r\n\r\nfunction approxEntropy01(text: string): number {\r\n  // Cheap approximation: more unique chars and more uniform distribution => higher \"entropy-ish\" score\r\n  // Not Shannon entropy; good enough for heuristic signal in v1.\r\n  if (!text) return 0;\r\n  const freq = new Map<string, number>();\r\n  for (const ch of text) freq.set(ch, (freq.get(ch) ?? 0) + 1);\r\n\r\n  const uniqueRatio = Math.min(1, freq.size / 60); // 60 chosen as rough saturation\r\n  // penalize if one char dominates\r\n  let maxFrac = 0;\r\n  for (const v of freq.values()) maxFrac = Math.max(maxFrac, v / text.length);\r\n  const uniformity = 1 - maxFrac; // higher is better\r\n  const score = 0.6 * uniqueRatio + 0.4 * uniformity;\r\n  return Math.max(0, Math.min(1, score));\r\n}\r\n\r\nfunction containsKeyValue(text: string): boolean {\r\n  // Look for patterns like KEY=VALUE or key: value across multiple lines\r\n  return /\\b[A-Za-z_][A-Za-z0-9_]{1,}\\s*[:=]\\s*[\"']?[^\\s\"']{3,}[\"']?/m.test(text);\r\n}\r\n\r\nfunction containsBase64Like(text: string): boolean {\r\n  // long-ish base64-like chunks\r\n  return /\\b[A-Za-z0-9+/]{40,}={0,2}\\b/.test(text);\r\n}\r\n\r\nfunction keywordStats(textLower: string) {\r\n  let hitCount = 0;\r\n  for (const kw of CREDENTIAL_KEYWORDS) {\r\n    if (textLower.includes(kw)) hitCount++;\r\n  }\r\n  const density = Math.min(1, hitCount / 6); // cap\r\n  return { hit: hitCount > 0, density };\r\n}\r\n\r\nexport function extractFeatures(rawText: string): Features {\r\n  const text = normalizeForScan(rawText);\r\n  const lower = text.toLowerCase();\r\n\r\n  const { hit, density } = keywordStats(lower);\r\n\r\n  const symbolRatio = ratioOf((c) => /[^\\w\\s]/.test(c), text);\r\n  const digitRatio = ratioOf((c) => /\\d/.test(c), text);\r\n\r\n  return {\r\n    length: text.length,\r\n    lineCount: countLines(text),\r\n    containsBackticks: text.includes(\"```\"),\r\n    containsKeyValuePairs: containsKeyValue(text),\r\n    containsCredentialKeywords: hit,\r\n    keywordDensity: density,\r\n    symbolRatio,\r\n    digitRatio,\r\n    base64Like: containsBase64Like(text),\r\n    entropyApprox: approxEntropy01(text),\r\n  };\r\n}\r\n", "export type RiskCategory =\r\n  | \"API_KEY\"\r\n  | \"PASSWORD\"\r\n  | \"EMAIL\"\r\n  | \"PHONE\"\r\n  | \"CREDIT_CARD\"\r\n  | \"PRIVATE_KEY\"\r\n  | \"JWT\"\r\n  | \"IP_ADDRESS\"\r\n  | \"FILE_PATH\"\r\n  | \"ENV_VARS\"\r\n  | \"DB_CONNECTION\"\r\n  | \"CODE_SNIPPET\";\r\n\r\nexport interface RuleHit {\r\n  category: RiskCategory;\r\n  label: string; // user-facing name\r\n  confidence: number; // 0..1\r\n  matchCount: number;\r\n  examples?: string[]; // small, redacted examples\r\n}\r\n\r\ntype Rule = {\r\n  category: RiskCategory;\r\n  label: string;\r\n  confidence: number;\r\n  regex: RegExp;\r\n  maxExamples?: number;\r\n  redact?: (s: string) => string;\r\n};\r\n\r\nconst defaultRedact = (s: string) => {\r\n  if (s.length <= 8) return \"****\";\r\n  return `${s.slice(0, 3)}\u2026${s.slice(-3)}`;\r\n};\r\n\r\nconst RULES: Rule[] = [\r\n  // --- High-signal secrets / credentials ---\r\n  {\r\n    category: \"PRIVATE_KEY\",\r\n    label: \"Private key material\",\r\n    confidence: 0.98,\r\n    regex: /-----BEGIN (RSA|EC|DSA|OPENSSH|PGP)? ?PRIVATE KEY-----/g,\r\n    maxExamples: 1,\r\n    redact: () => \"-----BEGIN \u2026 PRIVATE KEY-----\",\r\n  },\r\n  {\r\n    category: \"JWT\",\r\n    label: \"JWT token\",\r\n    confidence: 0.92,\r\n    regex: /\\beyJ[a-zA-Z0-9_-]{10,}\\.[a-zA-Z0-9._-]{10,}\\.[a-zA-Z0-9._-]{10,}\\b/g,\r\n    maxExamples: 2,\r\n    redact: defaultRedact,\r\n  },\r\n  {\r\n    category: \"API_KEY\",\r\n    label: \"API key\u2013like token\",\r\n    confidence: 0.9,\r\n    // Common token-ish patterns: sk-*, ghp_*, github_pat_*, xoxb- (Slack), etc.\r\n    regex:\r\n      /\\b(?:sk-[A-Za-z0-9]{20,}|ghp_[A-Za-z0-9]{30,}|github_pat_[A-Za-z0-9_]{20,}|xox[baprs]-[A-Za-z0-9-]{20,}|AIza[0-9A-Za-z\\-_]{20,})\\b/g,\r\n    maxExamples: 3,\r\n    redact: defaultRedact,\r\n  },\r\n  {\r\n    category: \"PASSWORD\",\r\n    label: \"Password/secret assignment\",\r\n    confidence: 0.85,\r\n    regex:\r\n      /\\b(password|passwd|pwd|secret|api[_-]?key|token)\\b\\s*[:=]\\s*[\"']?([^\\s\"']{6,})[\"']?/gi,\r\n    maxExamples: 2,\r\n    redact: (s: string) => {\r\n      // Redact RHS if possible\r\n      const parts = s.split(/[:=]/);\r\n      if (parts.length < 2) return \"secret=****\";\r\n      return `${parts[0]}=****`;\r\n    },\r\n  },\r\n  {\r\n    category: \"ENV_VARS\",\r\n    label: \".env / environment variables\",\r\n    confidence: 0.75,\r\n    regex:\r\n      /\\b[A-Z][A-Z0-9_]{2,}\\s*=\\s*[\"']?[^\\s\"']{6,}[\"']?\\b/g,\r\n    maxExamples: 3,\r\n    redact: (s: string) => {\r\n      const idx = s.indexOf(\"=\");\r\n      if (idx === -1) return \"ENV_VAR=****\";\r\n      return `${s.slice(0, idx)}=****`;\r\n    },\r\n  },\r\n  {\r\n    category: \"DB_CONNECTION\",\r\n    label: \"Database connection string\",\r\n    confidence: 0.9,\r\n    regex:\r\n      /\\b(?:postgres(?:ql)?:\\/\\/|mysql:\\/\\/|mongodb(?:\\+srv)?:\\/\\/|mssql:\\/\\/|redis:\\/\\/)[^\\s\"'<>]{10,}\\b/gi,\r\n    maxExamples: 2,\r\n    redact: defaultRedact,\r\n  },\r\n\r\n  // --- PII-ish patterns (medium signal) ---\r\n  {\r\n    category: \"EMAIL\",\r\n    label: \"Email address\",\r\n    confidence: 0.6,\r\n    regex: /\\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}\\b/gi,\r\n    maxExamples: 2,\r\n    redact: (s: string) => {\r\n      const [user, domain] = s.split(\"@\");\r\n      if (!domain) return \"***@***\";\r\n      const safeUser = user.length <= 2 ? \"*\" : `${user[0]}\u2026${user.slice(-1)}`;\r\n      return `${safeUser}@${domain}`;\r\n    },\r\n  },\r\n  {\r\n    category: \"PHONE\",\r\n    label: \"Phone number\",\r\n    confidence: 0.55,\r\n    regex:\r\n      /\\b(?:\\+?1[\\s.-]?)?(?:\\(\\d{3}\\)|\\d{3})[\\s.-]?\\d{3}[\\s.-]?\\d{4}\\b/g,\r\n    maxExamples: 2,\r\n    redact: () => \"***-***-****\",\r\n  },\r\n  {\r\n    category: \"CREDIT_CARD\",\r\n    label: \"Credit card\u2013like number\",\r\n    confidence: 0.55,\r\n    // Not perfect; we\u2019ll later add Luhn validation if needed.\r\n    regex: /\\b(?:\\d[ -]*?){13,19}\\b/g,\r\n    maxExamples: 1,\r\n    redact: defaultRedact,\r\n  },\r\n  {\r\n    category: \"IP_ADDRESS\",\r\n    label: \"IP address\",\r\n    confidence: 0.5,\r\n    regex:\r\n      /\\b(?:(?:25[0-5]|2[0-4]\\d|1?\\d?\\d)\\.){3}(?:25[0-5]|2[0-4]\\d|1?\\d?\\d)\\b/g,\r\n    maxExamples: 2,\r\n    redact: defaultRedact,\r\n  },\r\n\r\n  // --- Contextual leak-y things (lower confidence) ---\r\n  {\r\n    category: \"FILE_PATH\",\r\n    label: \"Local file path\",\r\n    confidence: 0.4,\r\n    regex:\r\n      /\\b(?:[A-Z]:\\\\Users\\\\[^\\s\"'<>]+|\\/Users\\/[^\\s\"'<>]+|\\/home\\/[^\\s\"'<>]+)\\b/g,\r\n    maxExamples: 2,\r\n    redact: (s: string) => {\r\n      // Keep top-level root, redact rest\r\n      if (s.startsWith(\"C:\\\\\")) return \"C:\\\\Users\\\\\u2026\";\r\n      if (s.startsWith(\"/Users/\")) return \"/Users/\u2026\";\r\n      if (s.startsWith(\"/home/\")) return \"/home/\u2026\";\r\n      return defaultRedact(s);\r\n    },\r\n  },\r\n  {\r\n    category: \"CODE_SNIPPET\",\r\n    label: \"Code snippet\",\r\n    confidence: 0.35,\r\n    // Look for triple-backtick blocks OR common syntax patterns\r\n    regex:\r\n      /```[\\s\\S]{20,}```|(?:\\b(function|class|import|export|const|let|var|def)\\b[\\s\\S]{10,})/g,\r\n    maxExamples: 1,\r\n    redact: () => \"Code snippet detected\",\r\n  },\r\n];\r\n\r\nfunction collectExamples(text: string, re: RegExp, max: number): string[] {\r\n  const examples: string[] = [];\r\n  // Ensure global for iterative matching\r\n  const regex = new RegExp(re.source, re.flags.includes(\"g\") ? re.flags : re.flags + \"g\");\r\n  let m: RegExpExecArray | null;\r\n  while ((m = regex.exec(text)) !== null) {\r\n    if (!m[0]) continue;\r\n    examples.push(m[0]);\r\n    if (examples.length >= max) break;\r\n  }\r\n  return examples;\r\n}\r\n\r\nexport function runRuleDetectors(text: string): RuleHit[] {\r\n  const hits: RuleHit[] = [];\r\n\r\n  for (const rule of RULES) {\r\n    const regex = new RegExp(rule.regex.source, rule.regex.flags.includes(\"g\") ? rule.regex.flags : rule.regex.flags + \"g\");\r\n    let matchCount = 0;\r\n\r\n    // Count matches quickly\r\n    let m: RegExpExecArray | null;\r\n    while ((m = regex.exec(text)) !== null) {\r\n      matchCount++;\r\n      if (matchCount > 50) break; // hard stop for perf\r\n    }\r\n\r\n    if (matchCount > 0) {\r\n      const maxExamples = rule.maxExamples ?? 0;\r\n      const rawExamples = maxExamples > 0 ? collectExamples(text, rule.regex, maxExamples) : undefined;\r\n      const examples = rawExamples?.map((ex) => (rule.redact ? rule.redact(ex) : defaultRedact(ex)));\r\n\r\n      hits.push({\r\n        category: rule.category,\r\n        label: rule.label,\r\n        confidence: rule.confidence,\r\n        matchCount,\r\n        examples,\r\n      });\r\n    }\r\n  }\r\n\r\n  // De-dupe by category keeping highest-confidence entry\r\n  const byCategory = new Map<RiskCategory, RuleHit>();\r\n  for (const hit of hits) {\r\n    const prev = byCategory.get(hit.category);\r\n    if (!prev || hit.confidence > prev.confidence) byCategory.set(hit.category, hit);\r\n  }\r\n\r\n  return Array.from(byCategory.values()).sort((a, b) => b.confidence - a.confidence);\r\n}\r\n", "import { extractFeatures, normalizeForScan } from \"./features\";\r\nimport { runRuleDetectors, RuleHit, RiskCategory } from \"./rules\";\r\n\r\nexport type RiskLevel = \"ALLOW\" | \"WARN\" | \"BLOCK\";\r\n\r\nexport interface ScanResult {\r\n  riskLevel: RiskLevel;\r\n  riskScore: number; // 0..1\r\n  hits: RuleHit[]; // explainable categories\r\n  explanation: string[]; // bullet-style reasons\r\n}\r\n\r\nfunction clamp01(x: number): number {\r\n  return Math.max(0, Math.min(1, x));\r\n}\r\n\r\nfunction maxConfidence(hits: RuleHit[], category: RiskCategory): number {\r\n  const h = hits.find((x) => x.category === category);\r\n  return h ? h.confidence : 0;\r\n}\r\n\r\nexport function scanTextForRisk(rawText: string): ScanResult {\r\n  const text = normalizeForScan(rawText);\r\n\r\n  // Empty or tiny strings are safe\r\n  if (!text || text.trim().length < 4) {\r\n    return { riskLevel: \"ALLOW\", riskScore: 0, hits: [], explanation: [] };\r\n  }\r\n\r\n  const hits = runRuleDetectors(text);\r\n  const f = extractFeatures(text);\r\n\r\n  // --- Rule-based base score (high precision signals) ---\r\n  const privateKey = maxConfidence(hits, \"PRIVATE_KEY\");\r\n  const apiKey = maxConfidence(hits, \"API_KEY\");\r\n  const jwt = maxConfidence(hits, \"JWT\");\r\n  const passwordAssign = maxConfidence(hits, \"PASSWORD\");\r\n  const dbConn = maxConfidence(hits, \"DB_CONNECTION\");\r\n\r\n  // Weighted max-ish aggregation\r\n  const rulesCore =\r\n    0.95 * privateKey +\r\n    0.8 * apiKey +\r\n    0.75 * jwt +\r\n    0.65 * passwordAssign +\r\n    0.75 * dbConn;\r\n\r\n  // --- Heuristic features (ML-inspired) ---\r\n  // These capture \u201Clooks like secrets/code/data\u201D even without matching a specific token pattern.\r\n  const longTextBoost = f.length > 500 ? 0.08 : f.length > 150 ? 0.04 : 0;\r\n  const keyValueBoost = f.containsKeyValuePairs ? 0.15 : 0;\r\n  const keywordBoost = f.containsCredentialKeywords ? 0.18 * f.keywordDensity : 0;\r\n  const entropyBoost = 0.18 * f.entropyApprox;\r\n  const base64Boost = f.base64Like ? 0.18 : 0;\r\n  const symbolBoost = f.symbolRatio > 0.25 ? 0.08 : 0;\r\n  const digitBoost = f.digitRatio > 0.22 ? 0.06 : 0;\r\n\r\n  // Code snippets are not always \u201Csensitive\u201D, but often indicate copying internal code.\r\n  const codeHit = maxConfidence(hits, \"CODE_SNIPPET\");\r\n  const codeBoost = codeHit > 0 ? 0.05 : 0;\r\n\r\n  const heuristic =\r\n    longTextBoost +\r\n    keyValueBoost +\r\n    keywordBoost +\r\n    entropyBoost +\r\n    base64Boost +\r\n    symbolBoost +\r\n    digitBoost +\r\n    codeBoost;\r\n\r\n  // Combine: rules dominate, heuristics support\r\n  const riskScore = clamp01(0.75 * clamp01(rulesCore) + 0.35 * clamp01(heuristic));\r\n\r\n  // Determine risk level thresholds\r\n  // - BLOCK is reserved for extremely strong indicators (e.g., private keys)\r\n  let riskLevel: RiskLevel = \"ALLOW\";\r\n  if (privateKey >= 0.95) riskLevel = \"BLOCK\";\r\n  else if (riskScore >= 0.6) riskLevel = \"WARN\";\r\n  else if (riskScore >= 0.35) riskLevel = \"WARN\";\r\n\r\n  // Explanation strings (human-readable)\r\n  const explanation: string[] = [];\r\n  for (const hit of hits.slice(0, 4)) {\r\n    if (hit.examples && hit.examples.length > 0) {\r\n      explanation.push(`${hit.label} (${hit.matchCount}) e.g., ${hit.examples.join(\", \")}`);\r\n    } else {\r\n      explanation.push(`${hit.label} (${hit.matchCount})`);\r\n    }\r\n  }\r\n\r\n  if (explanation.length === 0) {\r\n    // Provide feature-based rationale if no direct hits\r\n    if (f.containsCredentialKeywords) explanation.push(\"Credential-related language detected.\");\r\n    if (f.containsKeyValuePairs) explanation.push(\"Key/value assignment patterns detected.\");\r\n    if (f.base64Like) explanation.push(\"Base64-like encoded block detected.\");\r\n    if (f.entropyApprox > 0.7) explanation.push(\"High-entropy token-like text detected.\");\r\n  }\r\n\r\n  return { riskLevel, riskScore, hits, explanation };\r\n}\r\n", "// extension/ui/modal.ts\r\n\r\nexport type ModalChoice = \"redact\" | \"continue\" | \"cancel\";\r\nexport type ModalRiskLevel = \"ALLOW\" | \"WARN\" | \"BLOCK\";\r\n\r\nexport interface WarningModalArgs {\r\n  riskLevel: ModalRiskLevel;\r\n  riskScore: number; // 0..1\r\n  explanation: string[];\r\n}\r\n\r\nconst OVERLAY_ID = \"__ai_privacy_guard_overlay__\";\r\nconst STYLE_ID = \"__ai_privacy_guard_style__\";\r\n\r\nfunction ensureStyles() {\r\n  if (document.getElementById(STYLE_ID)) return;\r\n\r\n  const style = document.createElement(\"style\");\r\n  style.id = STYLE_ID;\r\n  style.textContent = `\r\n    #${OVERLAY_ID} {\r\n      position: fixed;\r\n      inset: 0;\r\n      z-index: 2147483647;\r\n      background: rgba(0,0,0,0.45);\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      padding: 16px;\r\n      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, \"Apple Color Emoji\", \"Segoe UI Emoji\";\r\n    }\r\n    #${OVERLAY_ID} .apg-modal {\r\n      width: min(560px, 100%);\r\n      background: #0b0d12;\r\n      color: #f5f7ff;\r\n      border: 1px solid rgba(255,255,255,0.12);\r\n      border-radius: 14px;\r\n      box-shadow: 0 12px 40px rgba(0,0,0,0.5);\r\n      overflow: hidden;\r\n    }\r\n    #${OVERLAY_ID} .apg-header {\r\n      padding: 16px 18px 10px 18px;\r\n      display: flex;\r\n      gap: 12px;\r\n      align-items: flex-start;\r\n    }\r\n    #${OVERLAY_ID} .apg-icon {\r\n      width: 34px;\r\n      height: 34px;\r\n      border-radius: 10px;\r\n      display: grid;\r\n      place-items: center;\r\n      background: rgba(255,255,255,0.08);\r\n      flex: 0 0 auto;\r\n      margin-top: 2px;\r\n    }\r\n    #${OVERLAY_ID} .apg-title {\r\n      font-size: 16px;\r\n      font-weight: 700;\r\n      line-height: 1.2;\r\n      margin: 0;\r\n    }\r\n    #${OVERLAY_ID} .apg-subtitle {\r\n      margin: 6px 0 0 0;\r\n      color: rgba(245,247,255,0.75);\r\n      font-size: 13px;\r\n      line-height: 1.35;\r\n    }\r\n    #${OVERLAY_ID} .apg-body {\r\n      padding: 0 18px 14px 18px;\r\n    }\r\n    #${OVERLAY_ID} .apg-pill {\r\n      display: inline-flex;\r\n      align-items: center;\r\n      gap: 8px;\r\n      border: 1px solid rgba(255,255,255,0.14);\r\n      background: rgba(255,255,255,0.06);\r\n      border-radius: 999px;\r\n      padding: 6px 10px;\r\n      font-size: 12px;\r\n      color: rgba(245,247,255,0.85);\r\n      margin-top: 8px;\r\n    }\r\n    #${OVERLAY_ID} .apg-list {\r\n      margin: 12px 0 0 0;\r\n      padding: 0 0 0 18px;\r\n      color: rgba(245,247,255,0.85);\r\n      font-size: 13px;\r\n      line-height: 1.45;\r\n    }\r\n    #${OVERLAY_ID} .apg-footer {\r\n      padding: 14px 18px 18px 18px;\r\n      display: flex;\r\n      gap: 10px;\r\n      justify-content: flex-end;\r\n      border-top: 1px solid rgba(255,255,255,0.10);\r\n      background: rgba(255,255,255,0.03);\r\n      flex-wrap: wrap;\r\n    }\r\n    #${OVERLAY_ID} .apg-btn {\r\n      appearance: none;\r\n      border: 1px solid rgba(255,255,255,0.14);\r\n      background: rgba(255,255,255,0.06);\r\n      color: #f5f7ff;\r\n      padding: 10px 12px;\r\n      border-radius: 12px;\r\n      font-weight: 650;\r\n      font-size: 13px;\r\n      cursor: pointer;\r\n    }\r\n    #${OVERLAY_ID} .apg-btn:hover { background: rgba(255,255,255,0.10); }\r\n    #${OVERLAY_ID} .apg-btn:focus { outline: 2px solid rgba(124,92,255,0.75); outline-offset: 2px; }\r\n\r\n    #${OVERLAY_ID} .apg-btn-primary {\r\n      border-color: rgba(124,92,255,0.55);\r\n      background: rgba(124,92,255,0.25);\r\n    }\r\n    #${OVERLAY_ID} .apg-btn-primary:hover { background: rgba(124,92,255,0.35); }\r\n\r\n    #${OVERLAY_ID} .apg-btn-danger {\r\n      border-color: rgba(255,88,88,0.50);\r\n      background: rgba(255,88,88,0.18);\r\n    }\r\n    #${OVERLAY_ID} .apg-btn-danger:hover { background: rgba(255,88,88,0.28); }\r\n\r\n    #${OVERLAY_ID} .apg-kbd {\r\n      border: 1px solid rgba(255,255,255,0.14);\r\n      background: rgba(255,255,255,0.06);\r\n      border-bottom-color: rgba(255,255,255,0.22);\r\n      padding: 2px 6px;\r\n      border-radius: 8px;\r\n      font-size: 11px;\r\n      color: rgba(245,247,255,0.8);\r\n    }\r\n  `;\r\n  document.head.appendChild(style);\r\n}\r\n\r\nfunction formatPercent01(x: number): string {\r\n  const pct = Math.round(Math.max(0, Math.min(1, x)) * 100);\r\n  return `${pct}%`;\r\n}\r\n\r\nfunction iconForLevel(level: ModalRiskLevel): string {\r\n  if (level === \"BLOCK\") return \"\u26D4\";\r\n  return \"\u26A0\uFE0F\";\r\n}\r\n\r\nfunction titleForLevel(level: ModalRiskLevel): string {\r\n  if (level === \"BLOCK\") return \"Sensitive data likely detected\";\r\n  return \"Potential sensitive data detected\";\r\n}\r\n\r\nfunction subtitleForLevel(level: ModalRiskLevel): string {\r\n  if (level === \"BLOCK\") {\r\n    return \"This looks like high-risk content (e.g., private keys). Consider redacting before sending.\";\r\n  }\r\n  return \"Review what was detected before sending this to an AI tool.\";\r\n}\r\n\r\nfunction removeExistingOverlay() {\r\n  const existing = document.getElementById(OVERLAY_ID);\r\n  if (existing) existing.remove();\r\n}\r\n\r\nfunction getFocusable(container: HTMLElement): HTMLElement[] {\r\n  const selectors = [\r\n    \"button\",\r\n    \"[href]\",\r\n    \"input\",\r\n    \"select\",\r\n    \"textarea\",\r\n    \"[tabindex]:not([tabindex='-1'])\",\r\n  ];\r\n  return Array.from(container.querySelectorAll<HTMLElement>(selectors.join(\",\"))).filter(\r\n    (el) => !el.hasAttribute(\"disabled\") && el.tabIndex !== -1\r\n  );\r\n}\r\n\r\nexport function showWarningModal(args: WarningModalArgs): Promise<ModalChoice> {\r\n  ensureStyles();\r\n  removeExistingOverlay();\r\n\r\n  return new Promise<ModalChoice>((resolve) => {\r\n    const overlay = document.createElement(\"div\");\r\n    overlay.id = OVERLAY_ID;\r\n\r\n    // Clicking outside cancels (safer default)\r\n    overlay.addEventListener(\"mousedown\", (e) => {\r\n      if (e.target === overlay) {\r\n        cleanup(\"cancel\");\r\n      }\r\n    });\r\n\r\n    const modal = document.createElement(\"div\");\r\n    modal.className = \"apg-modal\";\r\n    modal.setAttribute(\"role\", \"dialog\");\r\n    modal.setAttribute(\"aria-modal\", \"true\");\r\n    modal.setAttribute(\"aria-label\", titleForLevel(args.riskLevel));\r\n\r\n    const header = document.createElement(\"div\");\r\n    header.className = \"apg-header\";\r\n\r\n    const icon = document.createElement(\"div\");\r\n    icon.className = \"apg-icon\";\r\n    icon.textContent = iconForLevel(args.riskLevel);\r\n\r\n    const headerText = document.createElement(\"div\");\r\n\r\n    const title = document.createElement(\"p\");\r\n    title.className = \"apg-title\";\r\n    title.textContent = titleForLevel(args.riskLevel);\r\n\r\n    const subtitle = document.createElement(\"p\");\r\n    subtitle.className = \"apg-subtitle\";\r\n    subtitle.textContent = subtitleForLevel(args.riskLevel);\r\n\r\n    const pill = document.createElement(\"div\");\r\n    pill.className = \"apg-pill\";\r\n    pill.textContent = `Risk confidence: ${formatPercent01(args.riskScore)} \u2022 Press `;\r\n    const kbd = document.createElement(\"span\");\r\n    kbd.className = \"apg-kbd\";\r\n    kbd.textContent = \"Esc\";\r\n    pill.appendChild(kbd);\r\n    pill.appendChild(document.createTextNode(\" to cancel\"));\r\n\r\n    headerText.appendChild(title);\r\n    headerText.appendChild(subtitle);\r\n    headerText.appendChild(pill);\r\n\r\n    header.appendChild(icon);\r\n    header.appendChild(headerText);\r\n\r\n    const body = document.createElement(\"div\");\r\n    body.className = \"apg-body\";\r\n\r\n    const list = document.createElement(\"ul\");\r\n    list.className = \"apg-list\";\r\n\r\n    const explanation = args.explanation?.length ? args.explanation : [\"No details available.\"];\r\n    for (const line of explanation.slice(0, 6)) {\r\n      const li = document.createElement(\"li\");\r\n      li.textContent = line;\r\n      list.appendChild(li);\r\n    }\r\n    body.appendChild(list);\r\n\r\n    const footer = document.createElement(\"div\");\r\n    footer.className = \"apg-footer\";\r\n\r\n    const btnCancel = document.createElement(\"button\");\r\n    btnCancel.className = \"apg-btn\";\r\n    btnCancel.textContent = \"Cancel\";\r\n    btnCancel.addEventListener(\"click\", () => cleanup(\"cancel\"));\r\n\r\n    const btnContinue = document.createElement(\"button\");\r\n    btnContinue.className = \"apg-btn apg-btn-primary\";\r\n    btnContinue.textContent = \"Continue anyway\";\r\n    btnContinue.addEventListener(\"click\", () => cleanup(\"continue\"));\r\n\r\n    const btnRedact = document.createElement(\"button\");\r\n    btnRedact.className = \"apg-btn apg-btn-danger\";\r\n    btnRedact.textContent = \"Redact & continue\";\r\n    btnRedact.addEventListener(\"click\", () => cleanup(\"redact\"));\r\n\r\n    // Order: safest actions are more prominent but not confusing\r\n    footer.appendChild(btnCancel);\r\n    footer.appendChild(btnContinue);\r\n    footer.appendChild(btnRedact);\r\n\r\n    modal.appendChild(header);\r\n    modal.appendChild(body);\r\n    modal.appendChild(footer);\r\n    overlay.appendChild(modal);\r\n    document.body.appendChild(overlay);\r\n\r\n    // Focus management\r\n    const previouslyFocused = document.activeElement as HTMLElement | null;\r\n\r\n    const focusables = getFocusable(modal);\r\n    const initialFocus = btnCancel; // safest default\r\n    initialFocus.focus();\r\n\r\n    function onKeyDown(e: KeyboardEvent) {\r\n      if (e.key === \"Escape\") {\r\n        e.preventDefault();\r\n        cleanup(\"cancel\");\r\n        return;\r\n      }\r\n\r\n      // Simple focus trap\r\n      if (e.key === \"Tab\") {\r\n        const items = getFocusable(modal);\r\n        if (items.length === 0) return;\r\n\r\n        const first = items[0];\r\n        const last = items[items.length - 1];\r\n        const active = document.activeElement as HTMLElement | null;\r\n\r\n        if (e.shiftKey && active === first) {\r\n          e.preventDefault();\r\n          last.focus();\r\n        } else if (!e.shiftKey && active === last) {\r\n          e.preventDefault();\r\n          first.focus();\r\n        }\r\n      }\r\n    }\r\n\r\n    document.addEventListener(\"keydown\", onKeyDown, true);\r\n\r\n    function cleanup(choice: ModalChoice) {\r\n      document.removeEventListener(\"keydown\", onKeyDown, true);\r\n      overlay.remove();\r\n      if (previouslyFocused && typeof previouslyFocused.focus === \"function\") {\r\n        previouslyFocused.focus();\r\n      }\r\n      resolve(choice);\r\n    }\r\n  });\r\n}\r\n", "// extension/content/interceptor.ts\r\n\r\nimport { scanTextForRisk } from \"../detectors/classifier\";\r\nimport { showWarningModal } from \"../ui/modal\";\r\n\r\ntype InputLike = HTMLTextAreaElement | HTMLInputElement | HTMLElement;\r\n\r\nconst AI_INPUT_SELECTOR_CANDIDATES = [\"textarea\", \"[contenteditable='true']\"];\r\n\r\n// Prevent re-entrancy (e.g., paste triggers, keydown triggers, site handlers fire twice)\r\nlet modalOpen = false;\r\n\r\nfunction safeHost(): string {\r\n  try {\r\n    return window.location.host || \"unknown\";\r\n  } catch {\r\n    return \"unknown\";\r\n  }\r\n}\r\n\r\nfunction toCategories(result: { hits: Array<{ category: string }> }): string[] {\r\n  // only categories, never text\r\n  return Array.from(new Set(result.hits.map((h) => h.category))).slice(0, 12);\r\n}\r\n\r\nasync function logAnalyticsEvent(args: {\r\n  source: \"paste\" | \"send\";\r\n  riskLevel: \"WARN\" | \"BLOCK\";\r\n  riskScore: number;\r\n  categories: string[];\r\n  action: \"redact\" | \"continue\" | \"cancel\";\r\n}) {\r\n  try {\r\n    await chrome.runtime.sendMessage({\r\n      type: \"APG_ANALYTICS_EVENT\",\r\n      payload: {\r\n        ts: Date.now(),\r\n        host: safeHost(),\r\n        source: args.source,\r\n        riskLevel: args.riskLevel,\r\n        riskScore: args.riskScore,\r\n        categories: args.categories,\r\n        action: args.action,\r\n      },\r\n    });\r\n  } catch {\r\n    // ignore; content scripts can run before SW wakes\r\n  }\r\n}\r\n\r\nfunction isVisible(el: HTMLElement): boolean {\r\n  const rect = el.getBoundingClientRect();\r\n  return rect.width > 0 && rect.height > 0;\r\n}\r\n\r\nfunction isEditableTarget(el: HTMLElement): el is HTMLElement {\r\n  return (\r\n    el instanceof HTMLTextAreaElement ||\r\n    el instanceof HTMLInputElement ||\r\n    el.isContentEditable\r\n  );\r\n}\r\n\r\nfunction getTextFromInput(el: InputLike): string {\r\n  if (el instanceof HTMLTextAreaElement || el instanceof HTMLInputElement) {\r\n    return el.value ?? \"\";\r\n  }\r\n  return (el as HTMLElement).innerText ?? \"\";\r\n}\r\n\r\nfunction setTextToInput(el: InputLike, text: string) {\r\n  if (el instanceof HTMLTextAreaElement || el instanceof HTMLInputElement) {\r\n    el.value = text;\r\n    el.dispatchEvent(new Event(\"input\", { bubbles: true }));\r\n  } else {\r\n    (el as HTMLElement).innerText = text;\r\n    (el as HTMLElement).dispatchEvent(new Event(\"input\", { bubbles: true }));\r\n  }\r\n}\r\n\r\nfunction findActiveAIInput(): InputLike | null {\r\n  // Prefer focused element if it\u2019s editable\r\n  const active = document.activeElement as HTMLElement | null;\r\n  if (active && isEditableTarget(active) && isVisible(active)) {\r\n    return active as InputLike;\r\n  }\r\n\r\n  // Fallback to scanning candidates\r\n  for (const selector of AI_INPUT_SELECTOR_CANDIDATES) {\r\n    const nodes = Array.from(document.querySelectorAll<HTMLElement>(selector));\r\n    for (const node of nodes) {\r\n      if (!isVisible(node)) continue;\r\n      if (node instanceof HTMLTextAreaElement || node instanceof HTMLInputElement) return node;\r\n      if (node.isContentEditable) return node;\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\n/**\r\n * Insert text at caret for <textarea>/<input>\r\n */\r\nfunction insertTextIntoTextControl(\r\n  el: HTMLTextAreaElement | HTMLInputElement,\r\n  insertText: string\r\n) {\r\n  const start = el.selectionStart ?? el.value.length;\r\n  const end = el.selectionEnd ?? el.value.length;\r\n\r\n  const before = el.value.slice(0, start);\r\n  const after = el.value.slice(end);\r\n\r\n  el.value = before + insertText + after;\r\n\r\n  const newPos = start + insertText.length;\r\n  el.setSelectionRange(newPos, newPos);\r\n  el.dispatchEvent(new Event(\"input\", { bubbles: true }));\r\n}\r\n\r\n/**\r\n * Insert text at caret for contenteditable elements using Selection/Range\r\n */\r\nfunction insertTextIntoContentEditable(el: HTMLElement, insertText: string) {\r\n  const sel = window.getSelection();\r\n  if (!sel) {\r\n    // fallback: append\r\n    el.innerText = (el.innerText ?? \"\") + insertText;\r\n    el.dispatchEvent(new Event(\"input\", { bubbles: true }));\r\n    return;\r\n  }\r\n\r\n  // Ensure selection is within this element\r\n  if (sel.rangeCount === 0 || !el.contains(sel.anchorNode)) {\r\n    // focus and append at end\r\n    el.focus();\r\n    el.innerText = (el.innerText ?? \"\") + insertText;\r\n    el.dispatchEvent(new Event(\"input\", { bubbles: true }));\r\n    return;\r\n  }\r\n\r\n  const range = sel.getRangeAt(0);\r\n  range.deleteContents();\r\n\r\n  const textNode = document.createTextNode(insertText);\r\n  range.insertNode(textNode);\r\n\r\n  // Move caret after inserted text node\r\n  range.setStartAfter(textNode);\r\n  range.collapse(true);\r\n\r\n  sel.removeAllRanges();\r\n  sel.addRange(range);\r\n\r\n  el.dispatchEvent(new Event(\"input\", { bubbles: true }));\r\n}\r\n\r\nfunction insertTextAtCaret(target: HTMLElement, insertText: string) {\r\n  if (target instanceof HTMLTextAreaElement || target instanceof HTMLInputElement) {\r\n    insertTextIntoTextControl(target, insertText);\r\n    return;\r\n  }\r\n  if (target.isContentEditable) {\r\n    insertTextIntoContentEditable(target, insertText);\r\n    return;\r\n  }\r\n\r\n  // no-op fallback\r\n}\r\n\r\n/**\r\n * Redact based on hit examples (v1 naive)\r\n */\r\nfunction applyNaiveRedaction(original: string, examples: string[] | undefined): string {\r\n  if (!examples || examples.length === 0) return original;\r\n  let redacted = original;\r\n  for (const ex of examples) {\r\n    // ex strings might already be partially redacted; still useful as a token marker\r\n    redacted = redacted.split(ex).join(\"[REDACTED]\");\r\n  }\r\n  return redacted;\r\n}\r\n\r\nasync function maybeWarn(text: string, source: \"paste\" | \"send\") {\r\n  const result = scanTextForRisk(text);\r\n  if (result.riskLevel === \"ALLOW\") return { action: \"allow\" as const, result };\r\n\r\n  modalOpen = true;\r\n  try {\r\n    const choice = await showWarningModal({\r\n      riskLevel: result.riskLevel,\r\n      riskScore: result.riskScore,\r\n      explanation: result.explanation,\r\n    });\r\n\r\n    // Log analytics for WARN/BLOCK only (no prompt content)\r\n    await logAnalyticsEvent({\r\n      source,\r\n      riskLevel: result.riskLevel, // WARN | BLOCK\r\n      riskScore: result.riskScore,\r\n      categories: toCategories(result),\r\n      action: choice,\r\n    });\r\n\r\n    return { action: choice, result };\r\n  } finally {\r\n    modalOpen = false;\r\n  }\r\n}\r\n\r\nasync function handleTextSubmission(el: InputLike): Promise<boolean> {\r\n  const text = getTextFromInput(el);\r\n  if (!text || text.trim().length < 4) return true;\r\n\r\n    const { action, result } = await maybeWarn(text, \"send\");\r\n  if (action === \"allow\" || action === \"continue\") return true;\r\n  if (action === \"cancel\") return false;\r\n\r\n  // redact\r\n  let redacted = text;\r\n  for (const hit of result.hits) {\r\n    redacted = applyNaiveRedaction(redacted, hit.examples);\r\n  }\r\n  setTextToInput(el, redacted);\r\n  return true;\r\n}\r\n\r\n/**\r\n * Intercept paste events (caret-aware)\r\n */\r\ndocument.addEventListener(\r\n  \"paste\",\r\n  async (e) => {\r\n    if (modalOpen) return;\r\n\r\n    const target = e.target as HTMLElement | null;\r\n    if (!target || !isEditableTarget(target)) return;\r\n\r\n    const pastedText = e.clipboardData?.getData(\"text\");\r\n    if (!pastedText) return;\r\n\r\n    const { action, result } = await maybeWarn(pastedText, \"paste\");\r\n    if (action === \"allow\") return;\r\n\r\n    // We are taking over the paste\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    // (stopImmediatePropagation is safe here: we\u2019re intentionally overriding)\r\n    (e as any).stopImmediatePropagation?.();\r\n\r\n    if (action === \"cancel\") return;\r\n\r\n    let finalText = pastedText;\r\n    if (action === \"redact\") {\r\n      for (const hit of result.hits) {\r\n        finalText = applyNaiveRedaction(finalText, hit.examples);\r\n      }\r\n    }\r\n\r\n    insertTextAtCaret(target, finalText);\r\n  },\r\n  true // capture: we want to run before site handlers\r\n);\r\n\r\n/**\r\n * Intercept Enter-to-send\r\n *\r\n * Notes:\r\n * - Shift+Enter should insert newline -> we do nothing\r\n * - Some sites use Ctrl/Cmd+Enter to send. We treat plain Enter as send-like and scan.\r\n * - We only block the event if user cancels.\r\n */\r\ndocument.addEventListener(\r\n  \"keydown\",\r\n  async (e) => {\r\n    if (modalOpen) return;\r\n    if (e.key !== \"Enter\") return;\r\n    if (e.shiftKey) return;\r\n\r\n    // If user is composing IME text, don\u2019t interfere\r\n    // (TS typing: KeyboardEvent has isComposing in modern DOM libs)\r\n    if ((e as any).isComposing) return;\r\n\r\n    const active = findActiveAIInput();\r\n    if (!active) return;\r\n\r\n    // Only act if the focused element is the active input\r\n    const focused = document.activeElement as HTMLElement | null;\r\n    if (focused && focused !== active && !active.contains(focused)) return;\r\n\r\n    const shouldContinue = await handleTextSubmission(active);\r\n\r\n    if (!shouldContinue) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      (e as any).stopImmediatePropagation?.();\r\n    }\r\n  },\r\n  true // capture so we can prevent before app handlers send\r\n);\r\n"],
  "mappings": "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",
  "names": []
}
